Building DAG of jobs...
Using shell: /bin/bash
Provided cores: 6
Rules claiming more threads will be scaled down.
Job stats:
job              count    min threads    max threads
-------------  -------  -------------  -------------
align                8              1              1
all                  1              1              1
ancestral            8              1              1
cleavage_site        1              1              1
export               8              1              1
filter               8              1              1
parse                8              1              1
refine               8              1              1
traits               8              1              1
translate            8              1              1
tree                 8              1              1
total               74              1              1

Select jobs to execute...

[Sun Apr 16 03:48:11 2023]
Job 52: Parsing fasta into sequences and metadata
Reason: Missing output files: results/sequences_h3nx_pa.fasta, results/metadata_h3nx_pa.tsv


        augur parse             --sequences h3nx_seg_filtered/h3nx_pa.fa             --output-sequences results/sequences_h3nx_pa.fasta             --output-metadata results/metadata_h3nx_pa.tsv             --fields strain accession subtype date host country             --prettify-fields country host
        

[Sun Apr 16 03:48:11 2023]
Job 43: Parsing fasta into sequences and metadata
Reason: Missing output files: results/sequences_h3nx_np.fasta, results/metadata_h3nx_np.tsv


        augur parse             --sequences h3nx_seg_filtered/h3nx_np.fa             --output-sequences results/sequences_h3nx_np.fasta             --output-metadata results/metadata_h3nx_np.tsv             --fields strain accession subtype date host country             --prettify-fields country host
        

[Sun Apr 16 03:48:11 2023]
Job 34: Parsing fasta into sequences and metadata
Reason: Missing output files: results/metadata_h3nx_na.tsv, results/sequences_h3nx_na.fasta


        augur parse             --sequences h3nx_seg_filtered/h3nx_na.fa             --output-sequences results/sequences_h3nx_na.fasta             --output-metadata results/metadata_h3nx_na.tsv             --fields strain accession subtype date host country             --prettify-fields country host
        

[Sun Apr 16 03:48:11 2023]
Job 6: Parsing fasta into sequences and metadata
Reason: Missing output files: results/metadata_h3nx_ha.tsv, results/sequences_h3nx_ha.fasta


        augur parse             --sequences h3nx_seg_filtered/h3nx_ha.fa             --output-sequences results/sequences_h3nx_ha.fasta             --output-metadata results/metadata_h3nx_ha.tsv             --fields strain accession subtype date host country             --prettify-fields country host
        

[Sun Apr 16 03:48:11 2023]
Job 25: Parsing fasta into sequences and metadata
Reason: Missing output files: results/sequences_h3nx_pb1.fasta, results/metadata_h3nx_pb1.tsv


        augur parse             --sequences h3nx_seg_filtered/h3nx_pb1.fa             --output-sequences results/sequences_h3nx_pb1.fasta             --output-metadata results/metadata_h3nx_pb1.tsv             --fields strain accession subtype date host country             --prettify-fields country host
        

[Sun Apr 16 03:48:11 2023]
Job 16: Parsing fasta into sequences and metadata
Reason: Missing output files: results/metadata_h3nx_pb2.tsv, results/sequences_h3nx_pb2.fasta


        augur parse             --sequences h3nx_seg_filtered/h3nx_pb2.fa             --output-sequences results/sequences_h3nx_pb2.fasta             --output-metadata results/metadata_h3nx_pb2.tsv             --fields strain accession subtype date host country             --prettify-fields country host
        
[Sun Apr 16 03:48:13 2023]
Finished job 43.
1 of 74 steps (1%) done
Select jobs to execute...

[Sun Apr 16 03:48:13 2023]
Job 42: 
        Filtering to
          - 5 sequence(s) per year country host
          - excluding strains in config/dropped_strains_h3nx.txt
          - samples with missing region and country metadata
          - excluding strains prior to 1997
        
Reason: Missing output files: results/filtered_h3nx_np.fasta; Input files updated by another job: results/sequences_h3nx_np.fasta, results/metadata_h3nx_np.tsv; Params have changed since last execution


        augur filter             --sequences results/sequences_h3nx_np.fasta             --metadata results/metadata_h3nx_np.tsv             --exclude config/dropped_strains_h3nx.txt             --include config/include_strains_h3nx.txt             --output results/filtered_h3nx_np.fasta             --group-by year country host             --sequences-per-group 5             --min-date 1997             --exclude-where host=laboratoryderived host=ferret host=unknown host=other country=? region=?             --min-length 1400             --non-nucleotide
        
[Sun Apr 16 03:48:14 2023]
Finished job 34.
2 of 74 steps (3%) done
Select jobs to execute...

[Sun Apr 16 03:48:14 2023]
Job 33: 
        Filtering to
          - 5 sequence(s) per year country host
          - excluding strains in config/dropped_strains_h3nx.txt
          - samples with missing region and country metadata
          - excluding strains prior to 1997
        
Reason: Missing output files: results/filtered_h3nx_na.fasta; Input files updated by another job: results/metadata_h3nx_na.tsv, results/sequences_h3nx_na.fasta; Params have changed since last execution


        augur filter             --sequences results/sequences_h3nx_na.fasta             --metadata results/metadata_h3nx_na.tsv             --exclude config/dropped_strains_h3nx.txt             --include config/include_strains_h3nx.txt             --output results/filtered_h3nx_na.fasta             --group-by year country host             --sequences-per-group 5             --min-date 1997             --exclude-where host=laboratoryderived host=ferret host=unknown host=other country=? region=?             --min-length 1270             --non-nucleotide
        
[Sun Apr 16 03:48:14 2023]
Finished job 52.
3 of 74 steps (4%) done
Select jobs to execute...

[Sun Apr 16 03:48:14 2023]
Job 51: 
        Filtering to
          - 5 sequence(s) per year country host
          - excluding strains in config/dropped_strains_h3nx.txt
          - samples with missing region and country metadata
          - excluding strains prior to 1997
        
Reason: Missing output files: results/filtered_h3nx_pa.fasta; Input files updated by another job: results/sequences_h3nx_pa.fasta, results/metadata_h3nx_pa.tsv; Params have changed since last execution


        augur filter             --sequences results/sequences_h3nx_pa.fasta             --metadata results/metadata_h3nx_pa.tsv             --exclude config/dropped_strains_h3nx.txt             --include config/include_strains_h3nx.txt             --output results/filtered_h3nx_pa.fasta             --group-by year country host             --sequences-per-group 5             --min-date 1997             --exclude-where host=laboratoryderived host=ferret host=unknown host=other country=? region=?             --min-length 2000             --non-nucleotide
        
[Sun Apr 16 03:48:14 2023]
Finished job 25.
4 of 74 steps (5%) done
Select jobs to execute...

[Sun Apr 16 03:48:14 2023]
Job 24: 
        Filtering to
          - 5 sequence(s) per year country host
          - excluding strains in config/dropped_strains_h3nx.txt
          - samples with missing region and country metadata
          - excluding strains prior to 1997
        
Reason: Missing output files: results/filtered_h3nx_pb1.fasta; Input files updated by another job: results/sequences_h3nx_pb1.fasta, results/metadata_h3nx_pb1.tsv; Params have changed since last execution


        augur filter             --sequences results/sequences_h3nx_pb1.fasta             --metadata results/metadata_h3nx_pb1.tsv             --exclude config/dropped_strains_h3nx.txt             --include config/include_strains_h3nx.txt             --output results/filtered_h3nx_pb1.fasta             --group-by year country host             --sequences-per-group 5             --min-date 1997             --exclude-where host=laboratoryderived host=ferret host=unknown host=other country=? region=?             --min-length 2100             --non-nucleotide
        
[Sun Apr 16 03:48:14 2023]
Finished job 16.
5 of 74 steps (7%) done
Select jobs to execute...

[Sun Apr 16 03:48:14 2023]
Job 15: 
        Filtering to
          - 5 sequence(s) per year country host
          - excluding strains in config/dropped_strains_h3nx.txt
          - samples with missing region and country metadata
          - excluding strains prior to 1997
        
Reason: Missing output files: results/filtered_h3nx_pb2.fasta; Input files updated by another job: results/metadata_h3nx_pb2.tsv, results/sequences_h3nx_pb2.fasta; Params have changed since last execution


        augur filter             --sequences results/sequences_h3nx_pb2.fasta             --metadata results/metadata_h3nx_pb2.tsv             --exclude config/dropped_strains_h3nx.txt             --include config/include_strains_h3nx.txt             --output results/filtered_h3nx_pb2.fasta             --group-by year country host             --sequences-per-group 5             --min-date 1997             --exclude-where host=laboratoryderived host=ferret host=unknown host=other country=? region=?             --min-length 2100             --non-nucleotide
        
[Sun Apr 16 03:48:14 2023]
Finished job 6.
6 of 74 steps (8%) done
Select jobs to execute...

[Sun Apr 16 03:48:14 2023]
Job 5: 
        Filtering to
          - 5 sequence(s) per year country host
          - excluding strains in config/dropped_strains_h3nx.txt
          - samples with missing region and country metadata
          - excluding strains prior to 1997
        
Reason: Missing output files: results/filtered_h3nx_ha.fasta; Input files updated by another job: results/metadata_h3nx_ha.tsv, results/sequences_h3nx_ha.fasta; Params have changed since last execution


        augur filter             --sequences results/sequences_h3nx_ha.fasta             --metadata results/metadata_h3nx_ha.tsv             --exclude config/dropped_strains_h3nx.txt             --include config/include_strains_h3nx.txt             --output results/filtered_h3nx_ha.fasta             --group-by year country host             --sequences-per-group 5             --min-date 1997             --exclude-where host=laboratoryderived host=ferret host=unknown host=other country=? region=?             --min-length 1600             --non-nucleotide
        
[Sun Apr 16 03:48:15 2023]
Finished job 42.
7 of 74 steps (9%) done
Select jobs to execute...

[Sun Apr 16 03:48:15 2023]
Job 70: Parsing fasta into sequences and metadata
Reason: Missing output files: results/sequences_h3nx_mp.fasta, results/metadata_h3nx_mp.tsv


        augur parse             --sequences h3nx_seg_filtered/h3nx_mp.fa             --output-sequences results/sequences_h3nx_mp.fasta             --output-metadata results/metadata_h3nx_mp.tsv             --fields strain accession subtype date host country             --prettify-fields country host
        
[Sun Apr 16 03:48:16 2023]
Finished job 33.
8 of 74 steps (11%) done
Select jobs to execute...

[Sun Apr 16 03:48:16 2023]
Job 61: Parsing fasta into sequences and metadata
Reason: Missing output files: results/metadata_h3nx_ns.tsv, results/sequences_h3nx_ns.fasta


        augur parse             --sequences h3nx_seg_filtered/h3nx_ns.fa             --output-sequences results/sequences_h3nx_ns.fasta             --output-metadata results/metadata_h3nx_ns.tsv             --fields strain accession subtype date host country             --prettify-fields country host
        
[Sun Apr 16 03:48:16 2023]
Finished job 51.
9 of 74 steps (12%) done
Select jobs to execute...

[Sun Apr 16 03:48:16 2023]
Job 50: 
        Aligning sequences to config/references/h3nx_pa.gb
          - filling gaps with N
        
Reason: Missing output files: results/aligned_h3nx_pa.fasta; Input files updated by another job: results/filtered_h3nx_pa.fasta


        augur align             --sequences results/filtered_h3nx_pa.fasta             --reference-sequence config/references/h3nx_pa.gb             --output results/aligned_h3nx_pa.fasta             --remove-reference             --nthreads 1
        
[Sun Apr 16 03:48:16 2023]
Finished job 15.
10 of 74 steps (14%) done
Select jobs to execute...

[Sun Apr 16 03:48:16 2023]
Job 14: 
        Aligning sequences to config/references/h3nx_pb2.gb
          - filling gaps with N
        
Reason: Missing output files: results/aligned_h3nx_pb2.fasta; Input files updated by another job: results/filtered_h3nx_pb2.fasta


        augur align             --sequences results/filtered_h3nx_pb2.fasta             --reference-sequence config/references/h3nx_pb2.gb             --output results/aligned_h3nx_pb2.fasta             --remove-reference             --nthreads 1
        
[Sun Apr 16 03:48:16 2023]
Finished job 24.
11 of 74 steps (15%) done
Select jobs to execute...

[Sun Apr 16 03:48:17 2023]
Job 23: 
        Aligning sequences to config/references/h3nx_pb1.gb
          - filling gaps with N
        
Reason: Missing output files: results/aligned_h3nx_pb1.fasta; Input files updated by another job: results/filtered_h3nx_pb1.fasta


        augur align             --sequences results/filtered_h3nx_pb1.fasta             --reference-sequence config/references/h3nx_pb1.gb             --output results/aligned_h3nx_pb1.fasta             --remove-reference             --nthreads 1
        
[Sun Apr 16 03:48:17 2023]
Finished job 5.
12 of 74 steps (16%) done
Select jobs to execute...

[Sun Apr 16 03:48:17 2023]
Job 4: 
        Aligning sequences to config/references/h3nx_ha.gb
          - filling gaps with N
        
Reason: Missing output files: results/aligned_h3nx_ha.fasta; Input files updated by another job: results/filtered_h3nx_ha.fasta


        augur align             --sequences results/filtered_h3nx_ha.fasta             --reference-sequence config/references/h3nx_ha.gb             --output results/aligned_h3nx_ha.fasta             --remove-reference             --nthreads 1
        
[Sun Apr 16 03:48:17 2023]
Finished job 70.
13 of 74 steps (18%) done
Select jobs to execute...

[Sun Apr 16 03:48:17 2023]
Job 69: 
        Filtering to
          - 5 sequence(s) per year country host
          - excluding strains in config/dropped_strains_h3nx.txt
          - samples with missing region and country metadata
          - excluding strains prior to 1997
        
Reason: Missing output files: results/filtered_h3nx_mp.fasta; Input files updated by another job: results/sequences_h3nx_mp.fasta, results/metadata_h3nx_mp.tsv; Params have changed since last execution


        augur filter             --sequences results/sequences_h3nx_mp.fasta             --metadata results/metadata_h3nx_mp.tsv             --exclude config/dropped_strains_h3nx.txt             --include config/include_strains_h3nx.txt             --output results/filtered_h3nx_mp.fasta             --group-by year country host             --sequences-per-group 5             --min-date 1997             --exclude-where host=laboratoryderived host=ferret host=unknown host=other country=? region=?             --min-length 900             --non-nucleotide
        
[Sun Apr 16 03:48:18 2023]
Finished job 61.
14 of 74 steps (19%) done
Select jobs to execute...

[Sun Apr 16 03:48:18 2023]
Job 60: 
        Filtering to
          - 5 sequence(s) per year country host
          - excluding strains in config/dropped_strains_h3nx.txt
          - samples with missing region and country metadata
          - excluding strains prior to 1997
        
Reason: Missing output files: results/filtered_h3nx_ns.fasta; Input files updated by another job: results/metadata_h3nx_ns.tsv, results/sequences_h3nx_ns.fasta; Params have changed since last execution


        augur filter             --sequences results/sequences_h3nx_ns.fasta             --metadata results/metadata_h3nx_ns.tsv             --exclude config/dropped_strains_h3nx.txt             --include config/include_strains_h3nx.txt             --output results/filtered_h3nx_ns.fasta             --group-by year country host             --sequences-per-group 5             --min-date 1997             --exclude-where host=laboratoryderived host=ferret host=unknown host=other country=? region=?             --min-length 800             --non-nucleotide
        
[Sun Apr 16 03:48:19 2023]
Finished job 69.
15 of 74 steps (20%) done
Select jobs to execute...

[Sun Apr 16 03:48:19 2023]
Job 32: 
        Aligning sequences to config/references/h3nx_na.gb
          - filling gaps with N
        
Reason: Missing output files: results/aligned_h3nx_na.fasta; Input files updated by another job: results/filtered_h3nx_na.fasta


        augur align             --sequences results/filtered_h3nx_na.fasta             --reference-sequence config/references/h3nx_na.gb             --output results/aligned_h3nx_na.fasta             --remove-reference             --nthreads 1
        
[Sun Apr 16 03:48:19 2023]
Finished job 60.
16 of 74 steps (22%) done
Select jobs to execute...

[Sun Apr 16 03:48:19 2023]
Job 41: 
        Aligning sequences to config/references/h3nx_np.gb
          - filling gaps with N
        
Reason: Missing output files: results/aligned_h3nx_np.fasta; Input files updated by another job: results/filtered_h3nx_np.fasta


        augur align             --sequences results/filtered_h3nx_np.fasta             --reference-sequence config/references/h3nx_np.gb             --output results/aligned_h3nx_np.fasta             --remove-reference             --nthreads 1
        
[Sun Apr 16 03:51:01 2023]
Finished job 41.
17 of 74 steps (23%) done
Select jobs to execute...

[Sun Apr 16 03:51:01 2023]
Job 40: Building tree
Reason: Missing output files: results/tree-raw_h3nx_np.nwk; Input files updated by another job: results/aligned_h3nx_np.fasta


        augur tree             --alignment results/aligned_h3nx_np.fasta             --output results/tree-raw_h3nx_np.nwk             --method iqtree             --nthreads 1
        
[Sun Apr 16 03:51:14 2023]
Finished job 32.
18 of 74 steps (24%) done
Select jobs to execute...

[Sun Apr 16 03:51:14 2023]
Job 31: Building tree
Reason: Missing output files: results/tree-raw_h3nx_na.nwk; Input files updated by another job: results/aligned_h3nx_na.fasta


        augur tree             --alignment results/aligned_h3nx_na.fasta             --output results/tree-raw_h3nx_na.nwk             --method iqtree             --nthreads 1
        
[Sun Apr 16 03:51:36 2023]
Finished job 14.
19 of 74 steps (26%) done
Select jobs to execute...

[Sun Apr 16 03:51:36 2023]
Job 13: Building tree
Reason: Missing output files: results/tree-raw_h3nx_pb2.nwk; Input files updated by another job: results/aligned_h3nx_pb2.fasta


        augur tree             --alignment results/aligned_h3nx_pb2.fasta             --output results/tree-raw_h3nx_pb2.nwk             --method iqtree             --nthreads 1
        
[Sun Apr 16 03:51:55 2023]
Finished job 4.
20 of 74 steps (27%) done
Select jobs to execute...

[Sun Apr 16 03:51:55 2023]
Job 10: determining sequences that harbor furin cleavage sites
Reason: Missing output files: results/cleavage-site-sequences_h3nx_ha.json, results/cleavage-site_h3nx_ha.json; Input files updated by another job: results/aligned_h3nx_ha.fasta


        python scripts/annotate-ha-cleavage-site.py             --alignment results/aligned_h3nx_ha.fasta             --furin_site_motif results/cleavage-site_h3nx_ha.json             --cleavage_site_sequence results/cleavage-site-sequences_h3nx_ha.json
        
[Sun Apr 16 03:51:55 2023]
Finished job 50.
21 of 74 steps (28%) done
Select jobs to execute...

[Sun Apr 16 03:51:55 2023]
Job 49: Building tree
Reason: Missing output files: results/tree-raw_h3nx_pa.nwk; Input files updated by another job: results/aligned_h3nx_pa.fasta


        augur tree             --alignment results/aligned_h3nx_pa.fasta             --output results/tree-raw_h3nx_pa.nwk             --method iqtree             --nthreads 1
        
[Sun Apr 16 03:51:56 2023]
Finished job 10.
22 of 74 steps (30%) done
Select jobs to execute...

[Sun Apr 16 03:51:56 2023]
Job 3: Building tree
Reason: Missing output files: results/tree-raw_h3nx_ha.nwk; Input files updated by another job: results/aligned_h3nx_ha.fasta


        augur tree             --alignment results/aligned_h3nx_ha.fasta             --output results/tree-raw_h3nx_ha.nwk             --method iqtree             --nthreads 1
        
[Sun Apr 16 03:52:09 2023]
Finished job 23.
23 of 74 steps (31%) done
Select jobs to execute...

[Sun Apr 16 03:52:09 2023]
Job 22: Building tree
Reason: Missing output files: results/tree-raw_h3nx_pb1.nwk; Input files updated by another job: results/aligned_h3nx_pb1.fasta


        augur tree             --alignment results/aligned_h3nx_pb1.fasta             --output results/tree-raw_h3nx_pb1.nwk             --method iqtree             --nthreads 1
        
Terminating processes on user request, this might take some time.
[Sun Apr 16 03:56:34 2023]
Error in rule tree:
    jobid: 22
    input: results/aligned_h3nx_pb1.fasta
    output: results/tree-raw_h3nx_pb1.nwk
    shell:
        
        augur tree             --alignment results/aligned_h3nx_pb1.fasta             --output results/tree-raw_h3nx_pb1.nwk             --method iqtree             --nthreads 1
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

[Sun Apr 16 03:56:34 2023]
Error in rule tree:
    jobid: 3
    input: results/aligned_h3nx_ha.fasta
    output: results/tree-raw_h3nx_ha.nwk
    shell:
        
        augur tree             --alignment results/aligned_h3nx_ha.fasta             --output results/tree-raw_h3nx_ha.nwk             --method iqtree             --nthreads 1
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

[Sun Apr 16 03:56:34 2023]
[Sun Apr 16 03:56:34 2023]
Error in rule tree:
    jobid: 40
    input: results/aligned_h3nx_np.fasta
    output: results/tree-raw_h3nx_np.nwk
    shell:
        
        augur tree             --alignment results/aligned_h3nx_np.fasta             --output results/tree-raw_h3nx_np.nwk             --method iqtree             --nthreads 1
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Error in rule tree:
    jobid: 13
    input: results/aligned_h3nx_pb2.fasta
    output: results/tree-raw_h3nx_pb2.nwk
    shell:
        
        augur tree             --alignment results/aligned_h3nx_pb2.fasta             --output results/tree-raw_h3nx_pb2.nwk             --method iqtree             --nthreads 1
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

[Sun Apr 16 03:56:34 2023]
Error in rule tree:
    jobid: 49
    input: results/aligned_h3nx_pa.fasta
    output: results/tree-raw_h3nx_pa.nwk
    shell:
        
        augur tree             --alignment results/aligned_h3nx_pa.fasta             --output results/tree-raw_h3nx_pa.nwk             --method iqtree             --nthreads 1
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

[Sun Apr 16 03:56:34 2023]
Error in rule tree:
    jobid: 31
    input: results/aligned_h3nx_na.fasta
    output: results/tree-raw_h3nx_na.nwk
    shell:
        
        augur tree             --alignment results/aligned_h3nx_na.fasta             --output results/tree-raw_h3nx_na.nwk             --method iqtree             --nthreads 1
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Complete log: .snakemake/log/2023-04-16T034810.728761.snakemake.log
